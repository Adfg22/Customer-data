<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ø¨ÙˆØ§Ø¨Ø© Ù…Ø³Ø§Ù‡Ù…ÙŠÙ† Ø§Ù„Ø±Ù‡ÙˆØ§Ù†</title>

<style>
  body {
    font-family: "Cairo", sans-serif;
    background: linear-gradient(135deg, #e6e3f7, #fffaf0);
    padding: 30px;
    color: #333;
    margin: 0;
  }

  .card {
    background: #fff;
    border-radius: 16px;
    padding: 20px 24px;
    margin-bottom: 25px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.12); }

  .card h2, .card h3, .card h4 { margin: 0 0 15px; color: #4b2bcc; }

  input, button {
    padding: 12px 14px;
    border-radius: 8px;
    border: 1px solid #ddd;
    font-size: 1rem;
    outline: none;
    transition: all 0.3s;
    width: 100%;
    box-sizing: border-box;
    margin-bottom: 12px;
  }
  input:focus { border-color: #7b3cff; box-shadow: 0 0 8px rgba(123,60,255,0.2); }

  button {
    background: linear-gradient(45deg,#7b3cff,#9d5fff);
    color: #fff;
    font-weight: bold;
    border: none;
    cursor: pointer;
    transition: all 0.3s;
  }
  button:hover { background: linear-gradient(45deg,#9d5fff,#7b3cff); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(123,60,255,0.3); }

  .secondary {
    background: #eee;
    color: #333;
    font-weight: normal;
  }
  .secondary:hover { background: #ddd; }

  .badges { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 10px; }
  .badge { padding: 6px 12px; background: linear-gradient(45deg,#f3f5ff,#e0e4ff); color:#5a2bb3; border-radius: 12px; font-size: 0.9rem; font-weight: 600; box-shadow: 0 2px 8px rgba(90,43,179,0.2); }

  ul { padding-left: 20px; margin: 10px 0; }
  li { margin-bottom: 8px; line-height: 1.5; }
  .muted { color: #777; font-size: 0.9rem; }

  .info-boxes { display:flex; flex-wrap:wrap; gap:15px; margin:15px 0; }
  .box-info { flex:1; min-width:150px; background:#fff; border-radius:12px; padding:16px; text-align:center; box-shadow:0 6px 15px rgba(0,0,0,0.08); }
  .box-info b { display:block; margin-bottom:6px; color:#4b2bcc; }
  .box-info span { font-size:1.1rem; font-weight:bold; color:#333; }

  .features-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:15px; margin-top:15px; }
  .feature-box { background:linear-gradient(135deg,#f9f7ff,#f0f0ff); border:1px solid #ddd; border-radius:14px; padding:14px; display:flex; align-items:center; gap:10px; box-shadow:0 6px 14px rgba(0,0,0,0.06); font-size:0.95rem; font-weight:600; color:#333; }

  /* âœ… ÙƒØªØ§Ù„ÙˆØ¬ Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ */
  #redeemPanel { margin-top:20px; padding:16px; background:#fafaff; border:1px solid #ddd; border-radius:12px; box-shadow:0 6px 14px rgba(0,0,0,0.08); }
  .catalog-item { background:#fff; padding:14px; border-radius:10px; margin-bottom:12px; box-shadow:0 4px 10px rgba(0,0,0,0.05); display:flex; justify-content:space-between; align-items:center; }
  .catalog-item b { color:#4b2bcc; display:block; }
  .catalog-item span { color:#333; font-size:0.9rem; }
</style>
</head>
<body>

<div class="card">
  <h2>Ø£Ø¯Ø®Ù„ ID Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</h2>
  <input type="text" id="memberIdInput" placeholder="Ù…Ø«Ø§Ù„: VIP2025">
  <button onclick="fetchMember()">Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§ØªÙŠ</button>
</div>

<div id="memberPanel" class="card" style="display:none">
  <h3 id="memberName"></h3>
  <div class="muted" id="memberIdLabel"></div>
  <div class="badges" id="memberBadges"></div>
  <hr>

  <div class="info-boxes">
    <div class="box-info"><b>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</b><span id="endDate"></span></div>
    <div class="box-info"><b>Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</b><span id="daysLeft"></span></div>
    <div class="box-info"><b>Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‚Ø§Ø·</b><span id="points">0</span></div>
  </div>

  <button onclick="openRedeem()">ğŸ¯ Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ù†Ù‚Ø§Ø·</button>

  <div id="redeemPanel" style="display:none">
    <h4>Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù†Ù‚Ø§Ø· Ø¨Ù€:</h4>
    <div id="catalog"></div>
    <button class="secondary" onclick="closeRedeem()">Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„</button>
  </div>

  <h4>Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ ÙˆØ§Ù„Ù…ÙƒØ§ÙØ¢Øª:</h4>
  <ul id="giftList"></ul>

  <h4>Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø³Ø§Ù‡Ù…:</h4>
  <div id="featureList" class="features-grid"></div>
</div>

<script>
// =============================
// Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø§Ù…Ø©
// =============================
const FEATURES = [
  "ğŸ Ø®ØµÙ… 15% Ø¹Ù„Ù‰ ÙƒÙ„ Ø·Ù„Ø¨ Ù„Ù…Ø¯Ø© Ø³Ù†Ø© ÙˆØ§Ø­Ø¯Ø©",
  "ğŸŒ¸ Ø¹Ø·Ø± Ø§ØµÙ„ÙŠ 50 Ù…Ù„ ÙÙŠ ÙƒÙ„ Ù…Ù†Ø§Ø³Ø¨Ø© (Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø± _ Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø¶Ø­Ù‰ _ Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯Ùƒ)",
  "ğŸ’³ ÙƒØ±Øª Ø¹Ø¶ÙˆÙŠØ© Ø®Ø§Øµ Ø¨Ø§Ù„Ù…Ø³Ø§Ù‡Ù…",
  "âš¡ Ø£ÙˆÙ„ÙˆÙŠØ© ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨Ø§Øª",
  "ğŸ”„ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ØªØ¬Ø¯ÙŠØ¯ Ù…Ù‚Ø§Ø¨Ù„ Ù…Ø¨Ù„Øº Ø¨Ø³ÙŠØ· ÙƒÙ„ Ø³Ù†Ø©",
  "ğŸ€ Ù…ÙƒØ§ÙØ¢Øª Ù…Ø¹ Ø§Ù„Ø¨ÙƒØ¬ Ø¹Ù†Ø¯ ÙƒÙ„ Ø·Ù„Ø¨",
  "ğŸ›ï¸ Ù‡Ø¯ÙŠØ© ØªØ±Ø­ÙŠØ¨ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (3 Ø¹Ø¨ÙˆØ§Øª Ø¹Ø·Ø± 5 Ù…Ù„)",
  "ğŸŒŸ Ø¯Ø¹ÙˆØ§Øª Ø®Ø§ØµØ© Ù„ØªØ¬Ø±Ø¨Ø© Ø¹Ø·ÙˆØ± VIP Ù‚Ø¨Ù„ Ù†Ø´Ø±Ù‡Ø§",
  "ğŸ’ ØªØ¬Ù…ÙŠØ¹ Ù†Ù‚Ø§Ø· ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ø¨Ø¹Ø·Ø± ØµØºÙŠØ± Ø£Ùˆ Ø®ØµÙ… Ø¥Ø¶Ø§ÙÙŠ",
  "ğŸ“¢ Ø¥Ø´Ø¹Ø§Ø± Ù…Ø¨ÙƒØ± Ø¨Ø§Ù„Ø¹Ø±ÙˆØ¶ Ù‚Ø¨Ù„ ÙŠÙˆÙ… Ø£Ùˆ ÙŠÙˆÙ…ÙŠÙ†"
];

const STORAGE_KEY = "contributors_db_v1";
const CATALOG = [
  { id: 'P_SMALL', name: 'Ø¹Ø·Ø± ØµØºÙŠØ± 5 Ù…Ù„', cost: 50, desc: 'Ø¹Ø·Ø± ØµØºÙŠØ± ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ø§Ù„Ù†Ù‚Ø§Ø·' },
  { id: 'DISCOUNT_5', name: 'Ø®ØµÙ… 5% Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨', cost: 40, desc: 'Ø®ØµÙ… Ø¥Ø¶Ø§ÙÙŠ Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ùƒ Ø§Ù„ØªØ§Ù„ÙŠ' },
  { id: 'GIFT_SET', name: 'Ø¨Ø§Ù‚Ø© Ù‡Ø¯ÙŠØ© (3Ã—5Ù…Ù„)', cost: 120, desc: 'Ø¨Ø§Ù‚Ø© ØµØºÙŠØ±Ø© ØªØ±Ø­ÙŠØ¨ÙŠØ©' },
  { id: 'FREE_50ML', name: 'Ø¹Ø·Ø± Ø£ØµÙ„ÙŠ 50 Ù…Ù„ (Ù…Ù†Ø§Ø³Ø¨Ø©)', cost: 400, desc: 'Ø¹Ø·Ø± 50 Ù…Ù„ Ù„Ù…Ù† ØªÙ†Ø·Ø¨Ù‚ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©' },
];

// =============================
// Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
// =============================
function formatDateISO(d){
  const dt = new Date(d);
  if(isNaN(dt)) return "-";
  return `${dt.getFullYear()}-${String(dt.getMonth()+1).padStart(2,'0')}-${String(dt.getDate()).padStart(2,'0')}`;
}
function daysBetween(from,to){ return Math.ceil((new Date(to)-new Date(from))/(1000*60*60*24)); }
function calcDaysLeft(endDate){
  const today=new Date(); today.setHours(0,0,0,0);
  const end=new Date(endDate); end.setHours(0,0,0,0);
  return daysBetween(today,end);
}
function createBadge(text){ const s=document.createElement("span"); s.className="badge"; s.textContent=text; return s; }

// =============================
// Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³Ø§Ù‡Ù…ÙŠÙ†
// =============================
let CURRENT_MEMBER=null;

function fetchMember(){
  const id=document.getElementById("memberIdInput").value.trim();
  if(!id){ alert("Ø£Ø¯Ø®Ù„ ID"); return; }

  fetch("contributors.json")
    .then(res=>res.json())
    .then(DB=>{
      const member=DB.members[id];
      if(!member){ alert("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ù€ID"); return; }
      CURRENT_MEMBER=member;
      showMember(member);
    })
    .catch(err=>alert("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: "+err));
}

function showMember(member){
  document.getElementById("memberPanel").style.display="block";
  document.getElementById("memberName").textContent=member.name;
  document.getElementById("memberIdLabel").textContent="ID: "+member.id;
  document.getElementById("endDate").textContent=formatDateISO(member.endDate);
  const days=calcDaysLeft(member.endDate);
  document.getElementById("daysLeft").textContent=days>0?days+" ÙŠÙˆÙ…":"Ø§Ù†ØªÙ‡Øª Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©";
  document.getElementById("points").textContent=member.points||0;

  const badges=document.getElementById("memberBadges"); badges.innerHTML="";
  if(member.isVIP) badges.appendChild(createBadge("VIP"));
  if(member.invites && member.invites>0) badges.appendChild(createBadge("Ø¯Ø¹ÙˆØ§Øª VIP: "+member.invites));

  const giftList=document.getElementById("giftList"); giftList.innerHTML="";
  if(member.gifts && member.gifts.length>0){
    member.gifts.forEach(g=>{ const li=document.createElement("li"); li.textContent=g; giftList.appendChild(li); });
  } else giftList.innerHTML="<li>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‡Ø¯Ø§ÙŠØ§</li>";

  const featureList=document.getElementById("featureList"); featureList.innerHTML="";
  FEATURES.forEach(f=>{
    const div=document.createElement("div"); div.className="feature-box";
    const emojiSpan=document.createElement("span"); emojiSpan.textContent=f.split(" ")[0];
    const textSpan=document.createElement("span"); textSpan.textContent=f.substring(f.indexOf(" ")+1);
    div.appendChild(emojiSpan); div.appendChild(textSpan); featureList.appendChild(div);
  });
}

// =============================
// Ù†Ø¸Ø§Ù… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù†Ù‚Ø§Ø·
// =============================
function openRedeem(){
  if(!CURRENT_MEMBER){ alert("Ø§Ø¯Ø®Ù„ ID Ø£ÙˆÙ„Ø§Ù‹"); return; }
  document.getElementById("redeemPanel").style.display="block";
  const catalogDiv=document.getElementById("catalog");
  catalogDiv.innerHTML="";
  CATALOG.forEach(item=>{
    const div=document.createElement("div");
    div.className="catalog-item";
    div.innerHTML=`<div><b>${item.name}</b><span>${item.desc}</span><br><span>Ø§Ù„ØªÙƒÙ„ÙØ©: ${item.cost} Ù†Ù‚Ø·Ø©</span></div>`;
    const btn=document.createElement("button");
    btn.textContent="Ø§Ø³ØªØ¨Ø¯Ù„";
    btn.onclick=()=>redeemItem(item);
    div.appendChild(btn);
    catalogDiv.appendChild(div);
  });
}
function closeRedeem(){ document.getElementById("redeemPanel").style.display="none"; }

function redeemItem(item){
  if(CURRENT_MEMBER.points<item.cost){ alert("Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙ"); return; }
  CURRENT_MEMBER.points-=item.cost;
  alert("ØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ "+item.name+" âœ…");
  document.getElementById("points").textContent=CURRENT_MEMBER.points;
}
</script>

</body>
</html>
